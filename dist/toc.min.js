/*!
 * jQuery-TOC
 * Table of Contents Generator Plugin for (non-)jQuery
 * 
 * @author Dolphin Wood <dolphin.w.e@gmail.com>
 * @version 0.0.4
 * Copyright 2015. MIT licensed.
 */
!function(e){"use strict";var t=function(e,t){for(var n in t)t.hasOwnProperty(n)&&t[n]&&(e[n]=t[n]);return e},n=function(e,t){var n=[],r=document.querySelectorAll(t);return Array.prototype.forEach.call(r,function(t){var r=t.querySelectorAll(e);n=n.concat(Array.prototype.slice.call(r))}),n},r=function(e){if("string"!=typeof e)return 0;var t=e.match(/\d/g);return t?Math.min.apply(null,t):1},o=function(e,t){for(;--t;){var n=document.createElement("ol");e.appendChild(n),e=n}return e},c=function(e,t){return 0>t?c(e.parentElement,t+1):t>0?o(e,t):e.parentElement},a=function(e,t){return function(n,r,o){var c=(n.textContent,t+"-"+o);r.textContent=n.textContent;var a=e?c:n.id||c;a=encodeURIComponent(a),n.id=a,r.href="#"+a}},i=function(e){var t=e.selector,o=e.scope,i=document.createElement("ol"),u=i,l=a(e.overwrite,e.prefix);return n(t,o).reduce(function(e,t,n){var o=r(t.tagName),a=o-e;a+=a%2;var f=c(u,a)||i,h=document.createElement("li"),p=document.createElement("a");return l(t,p,n),f.appendChild(h).appendChild(p),u=h,o},r(t)),i},u=function(e){var n={selector:"h1, h2, h3, h4, h5, h6",scope:"body",overwrite:!1,prefix:"toc"};e=t(n,e);var r=e.selector;if("string"!=typeof r)throw new TypeError("selector must be a string");if(!r.match(/^(?:h[1-6],?\s*)+$/g))throw new TypeError("selector must contains only h1-6");var o=location.hash;return o&&setTimeout(function(){location.hash="",location.hash=o},0),i(e)};"function"==typeof define&&define.amd?define(function(){return u}):e.initTOC=u}(window);