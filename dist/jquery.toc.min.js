/*!
 * jQuery-TOC
 * Table of Contents Generator Plugin for (non-)jQuery
 * 
 * @author Dolphin Wood <dolphin.w.e@gmail.com>
 * @version 0.0.4
 * Copyright 2015. MIT licensed.
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";var e=function(t){if("string"!=typeof t)return 0;var e=t.match(/\d/g);return e?Math.min.apply(null,e):1},n=function(e,n){for(;--n;)e=t("<ol/>").appendTo(e);return e},r=function(t,e){return 0>e?r(t.parent(),e+1):e>0?n(t,e):t.parent()},o=function(t,e){return function(n,r,o){var i=n.text(),a=e+"-"+o;r.text(i);var c=n[0],f=r[0],u=t?a:c.id||a;u=encodeURIComponent(u),c.id=u,f.href="#"+u}},i=function(n){var i=n.selector,a=n.scope,c=t("<ol/>"),f=c,u=e(i),h=o(n.overwrite,n.prefix);return t(a).find(i).each(function(n,o){var i=e(o.tagName),a=i-u;a=(Math.abs(a)+1)*(a%2);var s=t("<li/>"),p=t("<a/>"),l=r(f,a);l.length||(l=c),h(t(o),p,n),s.append(p).appendTo(l),f=s,u=i}),c};t.fn.initTOC=function(e){var n={selector:"h1, h2, h3, h4, h5, h6",scope:"body",overwrite:!1,prefix:"toc"};e=t.extend(n,e);var r=e.selector;if("string"!=typeof r)throw new TypeError("selector must be a string");if(!r.match(/^(?:h[1-6],?\s*)+$/g))throw new TypeError("selector must contains only h1-6");t(this).append(i(e));var o=location.hash;return o&&setTimeout(function(){location.hash="",location.hash=o},0),t(this)}});