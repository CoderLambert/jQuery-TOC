/*!
 * jQuery-TOC
 * Table of Contents Generator Plugin for (non-)jQuery
 * 
 * @author Dolphin Wood <dolphin.w.e@gmail.com>
 * @version 0.0.2
 * Copyright 2015. MIT licensed.
 */
!function(e){"function"==typeof define&&define.amd?define("jquery.toc",["jquery"],e):e(jQuery)}(function(e){"use strict";var t=function(e){if("string"!=typeof e)return 0;var t=e.match(/\d/g);return t?Math.min.apply(null,t):1},n=function(t,n){for(;n--;)t=e("<ol/>").appendTo(t);return t},r=function(e,t){return 0>t?r(e.parent(),t+1):t>0?n(e,t):e.parent()},o=function(e,t){return function(n,r,o){var i=n.text(),a=t+"-"+o;r.text(i);var c=n[0],f=r[0],u=e?a:c.id||a;u=encodeURIComponent(u),c.id=u,f.href="#"+u}},i=function(n){var i=n.selector,a=n.scope,c=e("<ol/>"),f=c,u=t(i),h=o(n.overwrite,n.prefix);return e(a).find(i).each(function(n,o){var i=t(o.tagName),a=i-u,p=e("<li/>"),s=e("<a/>"),l=r(f,a);l.length||(l=c),h(e(o),s,n),p.append(s).appendTo(l),f=p,u=i}),c};e.fn.initTOC=function(t){var n={selector:"h1, h2, h3, h4, h5, h6",scope:"body",overwrite:!1,prefix:"toc"};t=e.extend(n,t);var r=t.selector;if("string"!=typeof r)throw new TypeError("selector must be a string");if(!r.match(/^(?:h[1-6],?\s*)*$/g))throw new TypeError("selector must contains only h1-6");e(this).append(i(t));var o=location.hash;return o&&setTimeout(function(){location.hash="",location.hash=o},0),e(this)}});